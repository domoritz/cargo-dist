<html class="dark" id="oranda" lang="en"><head><title>cargo-dist</title><link href="/cargo-dist/favicon.ico" rel="icon"/><meta charset="utf-8"/><meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="Shippable application packaging for Rust" name="description"/><meta content="Shippable application packaging for Rust" name="description"/><meta content="Shippable application packaging for Rust" property="og:description"/><meta content="website" property="og:type"/><meta content="cargo-dist" property="og:title"/><meta content="interest-cohort=()" http_equiv="Permissions-Policy"/><meta content="summary_large_image" name="twitter:card"/><meta content="https://www.axo.dev/meta_small.jpeg" property="og:image"/><meta content="axo" property="og:image:alt"/><meta content="@axodotdev" name="twitter:creator"/><meta content="@axodotdev" name="twitter:site"/><link href="fringe@0.0.10.css" rel="stylesheet"/><link href="custom.css" rel="stylesheet"/></head><body><div class="container"><div class="repo_banner"><a href="https://github.com/axodotdev/cargo-dist"><div class="github-icon" aria-hidden="true"></div>Check out our GitHub</a></div><main><header><h1 class="title">cargo-dist</h1><nav class="nav"><ul><li><a href="/cargo-dist">Home</a></li><li><a href="/cargo-dist/CHANGELOG.html">CHANGELOG</a></li><li><a href="/cargo-dist/artifacts.html">Install</a></li><li><a href="/cargo-dist/book/">Docs</a></li></ul></nav></header><div><div class="artifacts"><div class="artifact-header hidden target" data-targets="x86_64-apple-darwin "><h4 class="text-center">Install</h4><div class="install-code-wrapper"><pre style="background-color:#263238;">
<span style="font-style:italic;color:#546e7a;"># WARNING: this installer is experimental
</span><span style="color:#82aaff;">curl</span><span style="color:#89ddff;"> --</span><span style="color:#f78c6c;">proto </span><span style="color:#89ddff;">&#39;</span><span style="color:#c3e88d;">=https</span><span style="color:#89ddff;">&#39; --</span><span style="color:#f78c6c;">tlsv1</span><span style="color:#82aaff;">.2</span><span style="color:#89ddff;"> -</span><span style="color:#f78c6c;">LsSf</span><span style="color:#82aaff;"> https://github.com/axodotdev/cargo-dist/releases/download/v0.0.3/cargo-dist-v0.0.3-installer.sh </span><span style="color:#89ddff;">| </span><span style="color:#82aaff;">sh</span></pre>
<button class="business-button button copy-clipboard-button primary" data-copy="# WARNING: this installer is experimental
curl --proto &#39;=https&#39; --tlsv1.2 -LsSf https://github.com/axodotdev/cargo-dist/releases/download/v0.0.3/cargo-dist-v0.0.3-installer.sh | sh"><svg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 20 20' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'><path d='M8 2a1 1 0 000 2h2a1 1 0 100-2H8z'></path><path d='M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z'></path></svg></button><a class="business-button button primary" href="cargo-dist-v0.0.3-installer.sh.txt">Source</a></div><div><span class="detect text-center">We have detected you are on mac, are we wrong?</span><a href="/cargo-dist/artifacts.html">View all installation options</a></div></div><div class="artifact-header hidden target" data-targets="x86_64-pc-windows-msvc "><h4 class="text-center">Install</h4><div class="install-code-wrapper"><pre style="background-color:#263238;">
<span style="font-style:italic;color:#546e7a;"># WARNING: this installer is experimental
</span><span style="color:#82aaff;">irm https://github.com/axodotdev/cargo-dist/releases/download/v0.0.3/cargo-dist-v0.0.3-installer.ps1 </span><span style="color:#89ddff;">| </span><span style="color:#82aaff;">iex</span></pre>
<button class="business-button button copy-clipboard-button primary" data-copy="# WARNING: this installer is experimental
irm https://github.com/axodotdev/cargo-dist/releases/download/v0.0.3/cargo-dist-v0.0.3-installer.ps1 | iex"><svg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 20 20' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'><path d='M8 2a1 1 0 000 2h2a1 1 0 100-2H8z'></path><path d='M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z'></path></svg></button><a class="business-button button primary" href="cargo-dist-v0.0.3-installer.ps1.txt">Source</a></div><div><span class="detect text-center">We have detected you are on windows, are we wrong?</span><a href="/cargo-dist/artifacts.html">View all installation options</a></div></div><div class="artifact-header hidden target" data-targets="x86_64-unknown-linux-gnu "><h4 class="text-center">Install</h4><div class="install-code-wrapper"><pre style="background-color:#263238;">
<span style="font-style:italic;color:#546e7a;"># WARNING: this installer is experimental
</span><span style="color:#82aaff;">curl</span><span style="color:#89ddff;"> --</span><span style="color:#f78c6c;">proto </span><span style="color:#89ddff;">&#39;</span><span style="color:#c3e88d;">=https</span><span style="color:#89ddff;">&#39; --</span><span style="color:#f78c6c;">tlsv1</span><span style="color:#82aaff;">.2</span><span style="color:#89ddff;"> -</span><span style="color:#f78c6c;">LsSf</span><span style="color:#82aaff;"> https://github.com/axodotdev/cargo-dist/releases/download/v0.0.3/cargo-dist-v0.0.3-installer.sh </span><span style="color:#89ddff;">| </span><span style="color:#82aaff;">sh</span></pre>
<button class="business-button button copy-clipboard-button primary" data-copy="# WARNING: this installer is experimental
curl --proto &#39;=https&#39; --tlsv1.2 -LsSf https://github.com/axodotdev/cargo-dist/releases/download/v0.0.3/cargo-dist-v0.0.3-installer.sh | sh"><svg stroke='currentColor' fill='currentColor' stroke-width='0' viewBox='0 0 20 20' height='1em' width='1em' xmlns='http://www.w3.org/2000/svg'><path d='M8 2a1 1 0 000 2h2a1 1 0 100-2H8z'></path><path d='M3 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v6h-4.586l1.293-1.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L10.414 13H15v3a2 2 0 01-2 2H5a2 2 0 01-2-2V5zM15 11h2a1 1 0 110 2h-2v-2z'></path></svg></button><a class="business-button button primary" href="cargo-dist-v0.0.3-installer.sh.txt">Source</a></div><div><span class="detect text-center">We have detected you are on linux, are we wrong?</span><a href="/cargo-dist/artifacts.html">View all installation options</a></div></div><a class="backup-download business-button hidden primary" href="/cargo-dist/artifacts.html">View installation options</a></div><div class="oranda-hide">
<h1><code>cargo-dist</code></h1>
</div>
<p><a href="https://crates.io/crates/cargo-dist" rel="noopener noreferrer"><img src="https://img.shields.io/crates/v/cargo-dist.svg" alt="crates.io"></a>
<a href="https://docs.rs/cargo-dist" rel="noopener noreferrer"><img src="https://docs.rs/cargo-dist/badge.svg" alt="docs"></a>
<a href="https://github.com/axodotdev/cargo-dist/actions/workflows/ci.yml" rel="noopener noreferrer"><img src="https://github.com/axodotdev/cargo-dist/workflows/Rust%20CI/badge.svg?branch=main" alt="Rust CI"></a></p>
<p><code>cargo build</code> but For Building Final Distributable Artifacts and uploading them to an archive.</p>
<p>The Big Idea of cargo-dist is that we want to streamline all the steps of providing prebuilt binaries
for a rust project. This includes:</p>
<ol>
<li>Generating your "Cut A Release" Github CI for you</li>
<li>Picking good build flags for a "production" release</li>
<li>Making zips and installers for the resulting binaries</li>
<li>Generating a machine-readable manifest so other tools can understand the results</li>
<li>Uploading all the resulting artifacts to a Github Release™️</li>
</ol>
<p>Even though cargo-dist is primarily a tool for building and packaging applications (steps 2-4), we put a fair amount of effort into Generating Your CI Scripts For You because we want to be able to run things locally and know what the CI <em>should</em> do without actually running it. It also helps avoid needless vendor lock-in -- in an ideal world, migrating from Github to Gitlab or your own personal infra would be just one invocation of cargo-dist away!</p>
<p>That said, the current version is Experimental and the extra conveniences currently only work with Github CI and Github Releases™️!</p>
<h1>Read The Book!</h1>
<p>We've got all the docs you need over at the <a href="https://axodotdev.github.io/cargo-dist/book/" rel="noopener noreferrer">cargo-dist book</a>!</p>
<ul>
<li><a href="https://axodotdev.github.io/cargo-dist/book/introduction.html" rel="noopener noreferrer">Introduction</a></li>
<li><a href="https://axodotdev.github.io/cargo-dist/book/install.html" rel="noopener noreferrer">Install</a></li>
<li><a href="https://axodotdev.github.io/cargo-dist/book/way-too-quickstart.html" rel="noopener noreferrer">Way-Too-Quickstart</a></li>
<li><a href="https://axodotdev.github.io/cargo-dist/book/guide.html" rel="noopener noreferrer">Guide</a></li>
<li><a href="https://axodotdev.github.io/cargo-dist/book/reference.html" rel="noopener noreferrer">Reference</a></li>
</ul>
<h1>Contributing</h1>
<h2>Updating Snapshots</h2>
<p>cargo-dist's tests rely on <a href="https://crates.io/crates/cargo-insta" rel="noopener noreferrer">cargo-insta</a> for snapshot testing various
outputs. This allows us to both catch regressions and also more easily review UI/output changes. If a snapshot
test fails, you will need to use the <code>cargo insta</code> CLI tool to update them:</p>
<pre style="background-color:#263238;"><span style="color:#82aaff;">cargo install cargo-insta
</span></pre>

<p>One installed, you can review and accept the changes with:</p>
<pre style="background-color:#263238;"><span style="color:#82aaff;">cargo insta review
</span></pre>

<p>If you know you like the changes, just use <code>cargo insta accept</code> to auto-apply all changes.</p>
<p>(If you introduced brand-new snapshot tests you will also have to <code>git add</code> them!)</p>
<blockquote>
<p>NOTE: when it succeeds, cargo-dist-schema's <code>emit</code> test will actually commit the results back to disk to <code>cargo-dist-schema/cargo-dist-schema.json</code> as a side-effect. This is a janky hack to make sure we have that stored and up to date at all times (the test also uses an insta snapshot but insta snapshots include an extra gunk header so it's not something we'd want to link end users). The file isn't even used for anything yet, I just want it to Exist because it seems useful and important. In the future we might properly host it and have our outputs link it via a <code>$schema</code> field.</p>
</blockquote>
<h2>Cutting Releases</h2>
<p>cargo-dist is self-hosting, so just follow the usual <a href="#usage-ci" rel="noopener noreferrer">usage instructions</a> and publish with <code>cargo release 1.0.0</code>! (Or whatever cooler version you prefer.)</p>
<p>If that releases succeeds, we recommend updating the bootstrap version of cargo-dist as a follow up:</p>
<ul>
<li>install the version of cargo-dist you just released by downloading the binary</li>
<li>edit cargo-dist-version in the root Cargo.toml to that version</li>
<li>run <code>cargo dist generate-ci</code> to regenerate the CI</li>
<li>commit, push to main</li>
</ul>
<p>Note that as a consequence of the way we self-host, cargo-dist's published artifacts will always be built/generated by a previous version of itself. This can be problematic if you make breaking changes to cargo-dist-schema's format... so don't! Many things in the schema are intentionally optional to enable forward and backward compatibility, so this should hopefully work well!</p>
<p>(Future work: mark <code>cargo release</code> do more magic like cutting RELEASES.md and whatnot?)</p>
</div></main><footer class="axo-gradient flex items-center justify-between px-4 py-2 text-slate-50 text-xs w-full"><a href="https://github.com/axodotdev/cargo-dist"><div class="footer github-icon" aria-hidden="true"></div></a><span>cargo-dist, MIT OR Apache-2.0 license.</span></footer></div><script defer="true" src="https://plausible.io/js/script.js" data-domain="opensource.axo.dev"></script><script src="/cargo-dist/artifacts.js"></script></body></html>