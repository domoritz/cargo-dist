<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CLI Manual - cargo-dist</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">2.</strong> Install</a></li><li class="chapter-item expanded "><a href="way-too-quickstart.html"><strong aria-hidden="true">3.</strong> Way Too Quick Start</a></li><li class="chapter-item expanded "><a href="guide.html"><strong aria-hidden="true">4.</strong> Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="simple-guide.html"><strong aria-hidden="true">4.1.</strong> A Simple Application</a></li><li class="chapter-item expanded "><a href="workspace-guide.html"><strong aria-hidden="true">4.2.</strong> More Complex Workspaces</a></li><li class="chapter-item expanded "><a href="cargo-release-guide.html"><strong aria-hidden="true">4.3.</strong> Using cargo-release</a></li></ol></li><li class="chapter-item expanded "><a href="reference.html"><strong aria-hidden="true">5.</strong> Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="concepts.html"><strong aria-hidden="true">5.1.</strong> Concepts</a></li><li class="chapter-item expanded "><a href="config.html"><strong aria-hidden="true">5.2.</strong> Config</a></li><li class="chapter-item expanded "><a href="artifacts.html"><strong aria-hidden="true">5.3.</strong> Artifacts</a></li><li class="chapter-item expanded "><a href="cli.html" class="active"><strong aria-hidden="true">5.4.</strong> CLI Manual</a></li><li class="chapter-item expanded "><a href="schema.html"><strong aria-hidden="true">5.5.</strong> dist-manifest.json</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">cargo-dist</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/axodotdev/cargo-dist" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/axodotdev/cargo-dist/edit/main/book/src/cli.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="cargo-dist-cli-manual"><a class="header" href="#cargo-dist-cli-manual">cargo dist CLI manual</a></h1>
<blockquote>
<p>This manual can be regenerated with <code>cargo dist help-markdown</code></p>
</blockquote>
<p>Shippable packaging for Rust.</p>
<p>When run without a subcommand, <code>cargo dist</code> will invoke the <code>build</code> subcommand. See <code>cargo dist help build</code> for more details.</p>
<h3 id="usage"><a class="header" href="#usage">Usage:</a></h3>
<pre><code>cargo dist [OPTIONS]
</code></pre>
<p>cargo dist <COMMAND></p>
<h3 id="commands"><a class="header" href="#commands">Commands</a></h3>
<ul>
<li><a href="#cargo-dist-build">build</a>: Build artifacts</li>
<li><a href="#cargo-dist-init">init</a>: Initialize default settings in your Cargo.toml</li>
<li><a href="#cargo-dist-generate-ci">generate-ci</a>: Generate CI scripts for orchestrating cargo-dist</li>
<li><a href="#cargo-dist-manifest">manifest</a>: Generate the final build manifest without running any builds</li>
<li><a href="#cargo-dist-help">help</a>: Print this message or the help of the given subcommand(s)</li>
</ul>
<h3 id="options"><a class="header" href="#options">Options</a></h3>
<p>This command is an alias for <code>cargo dist build</code>, refer to that</p>
<h3 id="global-options"><a class="header" href="#global-options">GLOBAL OPTIONS</a></h3>
<h4 id="--verbose-verbose"><a class="header" href="#--verbose-verbose"><code>--verbose &lt;VERBOSE&gt;</code></a></h4>
<p>How verbose logging should be (log level)</p>
<p>[default: warn]<br />
[possible values: off, error, warn, info, debug, trace]</p>
<h4 id="--output-format-output_format"><a class="header" href="#--output-format-output_format"><code>--output-format &lt;OUTPUT_FORMAT&gt;</code></a></h4>
<p>The format of the output</p>
<p>[default: human]<br />
[possible values: human, json]</p>
<h4 id="--no-local-paths"><a class="header" href="#--no-local-paths"><code>--no-local-paths</code></a></h4>
<p>Strip local paths from output (e.g. in the dist manifest json)</p>
<p>This is useful for generating a clean &quot;full&quot; manifest as follows:</p>
<p><code>cargo dist manifest --artifacts=all --output-format=json --no-local-paths</code></p>
<h4 id="--target-target"><a class="header" href="#--target-target"><code>--target &lt;TARGET&gt;</code></a></h4>
<p>Target triples we want to build</p>
<p>If left unspecified we will use the values in [workspace.metadata.dist], except for <code>cargo dist init</code> which will select some &quot;good defaults&quot; for you.</p>
<h4 id="--installer-installer"><a class="header" href="#--installer-installer"><code>--installer &lt;INSTALLER&gt;</code></a></h4>
<p>Installers we want to build</p>
<p>If left unspecified we will use the values in [workspace.metadata.dist]. <code>cargo dist init</code> will persist the values you pass to that location.</p>
<p>Possible values:</p>
<ul>
<li>shell:      Generates a shell script that fetches/installs the right build</li>
<li>powershell: Generates a powershell script that fetches/installs the right build</li>
</ul>
<h4 id="--ci-ci"><a class="header" href="#--ci-ci"><code>--ci &lt;CI&gt;</code></a></h4>
<p>CI we want to support</p>
<p>If left unspecified we will use the value in [workspace.metadata.dist]. <code>cargo dist init</code> will persist the values you pass to that location.</p>
<p>Possible values:</p>
<ul>
<li>github: Generate github CI that uploads to github releases</li>
</ul>
<h4 id="--tag-tag"><a class="header" href="#--tag-tag"><code>--tag &lt;TAG&gt;</code></a></h4>
<p>The (git) tag to use for the Announcement that each invocation of cargo-dist is performing.</p>
<p>This tag serves two purposes: defining which apps we are Announcing new Releases for (and therefore building binaries and installers for); and picking an id to use for certain URLs. For instance the git tag associated with a Github Release is part of the URL to fetch artifacts from that release, which needs to be known by some installers!</p>
<p>The currently accepted formats are &quot;v{VERSION}&quot; and &quot;{PACKAGE_NAME}-v{VERSION}&quot; (&quot;v1.0.0&quot;, &quot;v0.1.0-prerelease1&quot;, &quot;my-app-v1.0.0&quot;, etc).</p>
<p>If you use the prefixed version then we will only Announce/Release that package's apps (and return an error if that is not in fact the package's current version). This is approp</p>
<p>If you use the unprefixed version then we will assume you're Announcing/Releasing all packages in the workspace that have that version. This is appropriate for workspaces that only have one app, or for monorepos that version all their apps in lockstep.</p>
<p>If you do not specify this tag we will attempt to infer it by trying to Announce/Release every app in the workspace, succeeding only if they all have the same version. The tag selected will be &quot;v{VERSION}&quot;.</p>
<p>In the future we may try to make this look at the current git tags or something?</p>
<p><br><br><br></p>
<h2 id="cargo-dist-build"><a class="header" href="#cargo-dist-build">cargo dist build</a></h2>
<p>Build artifacts</p>
<h3 id="usage-1"><a class="header" href="#usage-1">Usage:</a></h3>
<pre><code>cargo dist build [OPTIONS]
</code></pre>
<h3 id="options-1"><a class="header" href="#options-1">Options</a></h3>
<h4 id="--artifacts-artifacts"><a class="header" href="#--artifacts-artifacts"><code>--artifacts &lt;ARTIFACTS&gt;</code></a></h4>
<p>Which subset of the Artifacts to build</p>
<p>Artifacts can be broken up into two major classes: &quot;local&quot; ones, which are made for each target system (executable-zips, symbols, MSIs...); and &quot;global&quot; ones, which are made once per app (curl-sh installers, npm package, metadata...).</p>
<p>Having this distinction lets us run cargo-dist independently on multiple machines without collisions between the outputs.</p>
<p>If let unspecified, we will pick a fuzzier &quot;host&quot; mode that builds &quot;as much as possible&quot; for the local system. This mode is appropriate for local testing/debugging/demoing. If no --target flags are passed on the CLI then &quot;host&quot; mode will try to intelligently guess which targets to build for, which may include building targets that aren't defined in your metadata.dist config (since that config may exclude the current machine!).</p>
<p>The specifics of &quot;host&quot; mode are intentionally unspecified to enable us to provider better out-of-the-box UX for local usage. In CI environments you should always specify &quot;global&quot; or &quot;local&quot; to get consistent behaviour!</p>
<p>[default: host]</p>
<p>Possible values:</p>
<ul>
<li>local:  Build target-specific artifacts like executable-zips and MSIs</li>
<li>global: Build unique artifacts like curl-sh installers and npm packages</li>
<li>host:   Fuzzily build &quot;as much as possible&quot; for the host system</li>
<li>all:    Build all the artifacts; useful for <code>cargo dist manifest</code></li>
</ul>
<h4 id="-h---help"><a class="header" href="#-h---help"><code>-h, --help</code></a></h4>
<p>Print help information (use <code>-h</code> for a summary)</p>
<h3 id="global-options-1"><a class="header" href="#global-options-1">GLOBAL OPTIONS</a></h3>
<p>This subcommand accepts all the <a href="#global-options">global options</a></p>
<p><br><br><br></p>
<h2 id="cargo-dist-init"><a class="header" href="#cargo-dist-init">cargo dist init</a></h2>
<p>Initialize default settings in your Cargo.toml</p>
<h3 id="usage-2"><a class="header" href="#usage-2">Usage:</a></h3>
<pre><code>cargo dist init [OPTIONS]
</code></pre>
<h3 id="options-2"><a class="header" href="#options-2">Options</a></h3>
<h4 id="-h---help-1"><a class="header" href="#-h---help-1"><code>-h, --help</code></a></h4>
<p>Print help information (use <code>-h</code> for a summary)</p>
<h3 id="global-options-2"><a class="header" href="#global-options-2">GLOBAL OPTIONS</a></h3>
<p>This subcommand accepts all the <a href="#global-options">global options</a></p>
<p><br><br><br></p>
<h2 id="cargo-dist-generate-ci"><a class="header" href="#cargo-dist-generate-ci">cargo dist generate-ci</a></h2>
<p>Generate CI scripts for orchestrating cargo-dist</p>
<h3 id="usage-3"><a class="header" href="#usage-3">Usage:</a></h3>
<pre><code>cargo dist generate-ci [OPTIONS]
</code></pre>
<h3 id="options-3"><a class="header" href="#options-3">Options</a></h3>
<h4 id="-h---help-2"><a class="header" href="#-h---help-2"><code>-h, --help</code></a></h4>
<p>Print help information (use <code>-h</code> for a summary)</p>
<h3 id="global-options-3"><a class="header" href="#global-options-3">GLOBAL OPTIONS</a></h3>
<p>This subcommand accepts all the <a href="#global-options">global options</a></p>
<p><br><br><br></p>
<h2 id="cargo-dist-manifest"><a class="header" href="#cargo-dist-manifest">cargo dist manifest</a></h2>
<p>Generate the final build manifest without running any builds.</p>
<p>Everything will be computed based on what cargo-dist <em>expects</em> the output of a build to be, so this may produce several paths to nowhere without the actual build to populate them!</p>
<p>This is most useful when paired with <code>--artifacts=all</code>.</p>
<h3 id="usage-4"><a class="header" href="#usage-4">Usage:</a></h3>
<pre><code>cargo dist manifest [OPTIONS]
</code></pre>
<h3 id="options-4"><a class="header" href="#options-4">Options</a></h3>
<h4 id="--artifacts-artifacts-1"><a class="header" href="#--artifacts-artifacts-1"><code>--artifacts &lt;ARTIFACTS&gt;</code></a></h4>
<p>Which subset of the Artifacts to build</p>
<p>Artifacts can be broken up into two major classes: &quot;local&quot; ones, which are made for each target system (executable-zips, symbols, MSIs...); and &quot;global&quot; ones, which are made once per app (curl-sh installers, npm package, metadata...).</p>
<p>Having this distinction lets us run cargo-dist independently on multiple machines without collisions between the outputs.</p>
<p>If let unspecified, we will pick a fuzzier &quot;host&quot; mode that builds &quot;as much as possible&quot; for the local system. This mode is appropriate for local testing/debugging/demoing. If no --target flags are passed on the CLI then &quot;host&quot; mode will try to intelligently guess which targets to build for, which may include building targets that aren't defined in your metadata.dist config (since that config may exclude the current machine!).</p>
<p>The specifics of &quot;host&quot; mode are intentionally unspecified to enable us to provider better out-of-the-box UX for local usage. In CI environments you should always specify &quot;global&quot; or &quot;local&quot; to get consistent behaviour!</p>
<p>[default: host]</p>
<p>Possible values:</p>
<ul>
<li>local:  Build target-specific artifacts like executable-zips and MSIs</li>
<li>global: Build unique artifacts like curl-sh installers and npm packages</li>
<li>host:   Fuzzily build &quot;as much as possible&quot; for the host system</li>
<li>all:    Build all the artifacts; useful for <code>cargo dist manifest</code></li>
</ul>
<h4 id="-h---help-3"><a class="header" href="#-h---help-3"><code>-h, --help</code></a></h4>
<p>Print help information (use <code>-h</code> for a summary)</p>
<h3 id="global-options-4"><a class="header" href="#global-options-4">GLOBAL OPTIONS</a></h3>
<p>This subcommand accepts all the <a href="#global-options">global options</a></p>
<p><br><br><br></p>
<h2 id="cargo-dist-help"><a class="header" href="#cargo-dist-help">cargo dist help</a></h2>
<p>Print this message or the help of the given subcommand(s)</p>
<h3 id="usage-5"><a class="header" href="#usage-5">Usage:</a></h3>
<pre><code>cargo dist help [COMMAND]
</code></pre>
<h3 id="commands-1"><a class="header" href="#commands-1">Commands</a></h3>
<ul>
<li><a href="#cargo-dist-build">build</a>: Build artifacts</li>
<li><a href="#cargo-dist-init">init</a>: Initialize default settings in your Cargo.toml</li>
<li><a href="#cargo-dist-generate-ci">generate-ci</a>: Generate CI scripts for orchestrating cargo-dist</li>
<li><a href="#cargo-dist-manifest">manifest</a>: Generate the final build manifest without running any builds</li>
<li><a href="#cargo-dist-help">help</a>: Print this message or the help of the given subcommand(s)</li>
</ul>
<p>stderr:</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="artifacts.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="schema.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="artifacts.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="schema.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
